<%- include('partials/header')  %>
<div class="ParentClass">
    <div class="ImageSizeCustomize"></div>
    
    <h3>please Login bro !!</h3> 
    <a href="http://localhost:8000/signup">you not sign please sign in bro !!</a>
    <pre> </pre>
    <form>
        <label>Email</label><div></div> <input type="text" name="Email" required/><br/>
        <div class="emails errors" style="color: red;"></div>
        <pre></pre>
        <label>Password</label><div></div><input type="password" name="password" required><br/>
        <div class="passwords errors" style="color: red;"></div>
        <pre></pre>
       <button class="inputSubmit">Login</button>
    </form>
</div>

<script>
    const form = document.querySelector('form')
    const emailError = document.querySelector('.emails')
    const passError = document.querySelector('.passwords')
   

    form.addEventListener('submit',async(e)=>{
        e.preventDefault();

        //get the values
        const email = form.Email.value
        const password = form.password.value 
        
        try{
            const res = await fetch('/login',{
                method : 'POST',
                body : JSON.stringify({email : email,password : password}),
                headers : {
                    'Content-Type' : 'application/json',
                }
            })
            const data = await res.json()
           if(data.errors){       
            emailError.textContent = data.errors.email
            passError.textContent = data.errors.password
           }
           else if(data){ 
           if(data.user){
            console.log(data)
            location.assign('/')
           }else{
            console.log("show data",data)
           }
           } 
        //    else{    
        //        form.Email.value = ''
        //        form.password.value = ''
        //        emailError.textContent = ''   
        //        passError.textContent = ''
              
        //    }
           
        }catch(error){
           console.log("login error ",error)
        }
    })
   
</script>

<%- include('partials/footer')  %>