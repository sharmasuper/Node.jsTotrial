<%- include('partials/header')  %>
<div class="ParentClass">
    <div class="ImageSizeCustomize"></div>
    
    <h3>please sign in bro !!</h3>
    <pre> </pre>
    <form>
        <label>Email</label><div></div> <input type="text" name="Email" required/><br/>
        <div class="email error" style="color: red;"></div>
        <pre></pre>
        <label>Password</label><div></div><input type="password" name="password" required><br/>
        <div class="password error" style="color: red;"></div>
        <pre></pre>
       <button class="inputSubmit">Submit</button>
    </form>

</div>

<script>
    const form = document.querySelector('form')
    const emailError = document.querySelector('.email')
    const passError = document.querySelector('.password')
   

    form.addEventListener('submit',async(e)=>{
        e.preventDefault();

        //get the values
        const email = form.Email.value
        const password = form.password.value 
        
         try{
           const res  = await fetch('/signup',{ 
             method : 'POST',
             body : JSON.stringify({email: email,password : password }),
             headers : {'Content-Type':'application/json'}
           });
           const data = await res.json()
           if(data.errors){       
            emailError.textContent = data.errors.email
            passError.textContent = data.errors.password
           }
           else{    
               form.Email.value = ''
               form.password.value = ''
               emailError.textContent = ''
               passError.textContent = ''
               location.assign('/login')
           }
           
         }catch(error){
            console.log("show error ",error)
         }
    })
   
</script>

<%- include('partials/footer')  %>